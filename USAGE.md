# Quick Start Guide

## Installation

```bash
# Install globally via npm
npm install -g claude-collect-permissions

# Or run directly without installing
npx claude-collect-permissions <command>
bunx claude-collect-permissions <command>
pnpm dlx claude-collect-permissions <command>
```

## Running Commands

```bash
# List all active Claude Code sessions
claude-collect-permissions list

# Collect and analyze commands (uses Claude CLI)
claude-collect-permissions collect

# Apply approved commands
claude-collect-permissions apply review-2025-10-23-183045.json
```

## First Run Workflow

1. **Discover your sessions:**
   ```bash
   claude-collect-permissions list
   ```

2. **Collect commands for review:**
   ```bash
   claude-collect-permissions collect
   ```

   Note: This uses the `claude` CLI command, which must be installed and authenticated.

   This creates a `review-YYYY-MM-DD-HHMMSS.json` file.

3. **Review and approve commands interactively:**
   ```bash
   claude-collect-permissions review review-*.json
   ```

   Use the interactive interface to approve/deny each command:
   - `[A]` Approve - Add command to allowed list
   - `[D]` Deny - Skip this command
   - `[S]` Skip - Leave as pending for later
   - `[N]` Next - Move to next item
   - `[P]` Previous - Go back to previous item
   - `[Q]` Save & Quit - Save changes and exit

   **OR manually edit the file:**
   ```bash
   # Edit the review file
   vim review-*.json

   # Set "approved": true for commands you want to allow
   # Set "approved": false for commands you want to deny
   # Leave "approved": null to skip
   ```

4. **Apply approved commands:**
   ```bash
   claude-collect-permissions apply review-*.json
   ```

   This will:
   - Update `~/.claude/settings.json`
   - Create a backup
   - Log to `history/command-approvals.md`

5. **Start a new Claude Code session:**
   Your approved commands will now be auto-allowed in any new session!

## Files Created

- `review-*.json` - Generated by `collect`, edit to approve/deny commands
- `history/command-approvals.md` - Permanent log of all approvals
- `~/.claude/orchestrator-state.json` - Tracks last collection run
- `~/.claude/settings.json.backup.*` - Backups before modifications

## Tips

- Run `collect` weekly to gather new commands from your work
- Review files are safe to commit to git for team sharing
- The history file provides an audit trail of all command approvals
- Sessions older than 7 days (or last run) are automatically filtered out
